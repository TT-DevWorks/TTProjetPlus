@using Resources = TetraTech.TTProjetPlus.Views.TTProjet
@using Resources2 = TetraTech.TTProjetPlus.Views.ListeOffres
@model List<TetraTech.TTProjetPlus.Data.Projet>
<style>
</style>

@{
    ViewBag.Title = "Admin TI";
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>

<div id="loading">
    <img id="loadingGIF2" src="~/Content/assets/img/ajax-loader.gif" alt="Loading..." />
</div>

<div class="container " style="height: 200vh;width: 100%">
    <div class="main">

        @if (ViewBag.MenuVisible == "true")
        {
            <div class="row">
                <div class="row">
                    <div class="col-lg-4" style="padding-top: -49px;">
                        <div class="panel" style="border-radius: 10px; margin-left: -10px; height: 140px;">
                            <div class="panel-body">
                                <ul class="list-inline">
                                    <li><a style=" color:#183666;" href="@Url.Action("Index", "TTProjet" )">TT Projet +  /</a></li>
                                    <li><a style="color:#183666; font-weight: bold" href="@Url.Action("Index", "TTProjet", new { selectedPanel = "collapse8" })">@Resources.TTProjet.TITools</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="">
                            <div class="panel" style="border-radius: 10px; margin-left: -10px; height: 140px; ">
                                <div class="panel-body">
                                    <ul class="list-inline">
                                        <li>
                                            &bull;&nbsp;<a style="color: #183666; font-weight: bold " href="@Url.Action("IndexActiverProjet", "TTProjet")">@Resources.TTProjet.ActiverProjet</a>
                                        </li>
                                        <br>
                                        <li>
                                            &bull;&nbsp;<a style="color: #183666; " href="@Url.Action("IndexAdmin", "Admin")">@Resources.TTProjet.cancelProjectClosing</a>
                                        </li>
                                        <br>
                                        <li>
                                            &bull;&nbsp;<a style="color: #183666" href="@Url.Action("Index2", "FolderStructure")">Changement de serveur</a>
                                        </li>
                                        <br>
                                        <li>
                                            &bull;&nbsp;<a style="color:#183666 " href="@Url.Action("Index", "SecurityProjectEquivalence")">Équivalence des projets</a>
                                        </li>
                                        <br>
                                        <li>
                                            &bull;&nbsp;<a style="color:#183666 ;" href="@Url.Action("Index", "Litige")">@Resources.TTProjet.LitigeManagement</a>
                                        </li>
                                        <br>
                                    </ul>
                                </div>
                            </div>

                        </div>

                    </div>
                    <div class="col-lg-4">
                        <div class="">
                            <div class="panel" style="border-radius: 10px; margin-left: -10px; height: 140px; ">
                                <div class="panel-body">
                                    <ul class="list-inline">                                       
                                        <li>
                                            &bull;&nbsp;<a style="color: #183666; " href="@Url.Action("Index", "ProjetSecuriser")">Gestion des projets sécurisés</a>
                                        </li>
                                        <br>
                                        <li>
                                            &bull;&nbsp;<a style="color: #183666;" href="@Url.Action("Index", "GestionGroupeAD")">Gestion Groupe AD</a>
                                        </li>
                                        <br>
                                        <li>
                                            &bull;&nbsp;<a style="color:#183666 ;" href="@Url.Action("Index", "LocalBPR")">@Resources.TTProjet.EmployeeInfos</a>
                                        </li>
                                        <br>
                                        <li>
                                            &bull;&nbsp;<a style="color: #183666" href="@Url.Action("Index3", "FolderStructure")">@Resources.TTProjet.Security60Conf</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                        </div>

                    </div>

                </div>

                </div>
            
        }
        <div class="row">
            <div class="row">
                <div class="col-sm-12">
                    <div class="panel panel-primary" style="border-radius: 10px; margin-top: -10px; margin-bottom: 10px; margin-left: -10px;">
                        <div class="panel-body" style="margin:15px;">                            
                            <div class="row">
                                <div class="col-sm-12">
                                    <h4 style="margin-top: 0px; color: #183666; font-family: 'Arial Bold'; font-size: 18pt; margin-left: 10px;">
                                        <b>@Resources.TTProjet.ActiverProjet</b>
                                    </h4>
                                </div>
                            </div>
                            <br />
                            <div class="row" style="color:steelblue; font-size:initial">
                                <div class="form-group">
                                    <div class="col-sm-12 ">
                                        <p>@Resources.TTProjet.ActiverProjetInfos</p>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-4">
                                            <select data-live-search="true" class="form-control selectpicker" id="projectsList" data-size="15">
                                                <option value="" selected style="font-size:14px">@Resources.TTProjet.ChooseAProject</option>
                                                @foreach (TetraTech.TTProjetPlus.Data.Projet item in Model.OrderBy(x => x.PRO_Id))
                                                {
                                                    <option value="@item.PRO_Id">@item.PRO_Id</option>

                                                }
                                            </select>
                                        </div>
                                        <div class="col-lg-2">
                                            <button class="btn btn-primary" id="cancelButton" onclick="cancelProjectClosing()" style="display:none">Activer ce projet</button>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>

        </div>

    </div>

</div>
<script>
    $(document).ready(function () {

        $('.selectpicker').selectpicker(
        );
    });

    $('#projectsList').on('change', function () {
        if ($('#projectsList').val()!='') {
            $('#cancelButton').show();
        }
        else
            $('#cancelButton').css('display', 'none');
    })

    function cancelProjectClosing() {
                $.ajax({
                url: '@Url.Action("submitActiveProject", "TTProjet")',
                type: 'GET',
                data: {
                    projectId: $('#projectsList').val()
                },
                success: function (data)
                {
                    window.setTimeout(function () { location.reload() }, 500)
                    alert(data)
                }
            });
    }
</script>