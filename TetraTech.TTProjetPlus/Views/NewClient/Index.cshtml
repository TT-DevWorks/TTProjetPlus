@model TetraTech.TTProjetPlus.Models.numberGenerationModel
@using Resources = TetraTech.TTProjetPlus.Views.NewClient.NewClientRessources
@using TetraTech.TTProjetPlus.Models
@using TetraTech.TTProjetPlus.Controllers
@using TetraTech.TTProjetPlus.Security


@{
    ViewBag.Title = "Nouveau projet";

    var currentUser = UserService.CurrentUser;

}
<link href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
@*<link href="~/Content/assets/css/style.min.css" rel="stylesheet" type="text/css">*@
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
<style>
    /*
        pour icon dans input:
    */
    .inner-addon .glyphicon {
        position: absolute;
        padding: 10px;
        pointer-events: none;
    }


    /* add padding  */
    .right-addon {
        padding-right: 30px;
    }

    i {
        background: white;
        cursor: pointer;
    }
    /*fin */
    .panel-body {
        margin: 30px;
    }

    .form-control {
        border-radius: 0px;
    }

    .btn {
        border-radius: 0px;
    }

    .input-group-addon {
        border-radius: 0px;
    }

    label {
        color: steelblue;
        font-size: initial;
    }


    .redText {
        color: red;
    }

    .inputWidth {
        width: 100%;
    }

    .inputWidth2 {
        width: 50%;
        display: inline
    }

    table {
        font-size: 1em;
    }


        table.dataTable,
        table.dataTable th,
        table.dataTable td {
            -webkit-box-sizing: content-box;
            -moz-box-sizing: content-box;
            box-sizing: content-box;
        }



    h6 {
        color: white;
    }
    /* WebKit, Edge */
    .darkBlue::-webkit-input-placeholder {
        color: #183666;
        font-family: 'Arial';
        font-size: 16pt;
    }
    /* Firefox 4-18 */
    .darkBlue:-moz-placeholder {
        color: #183666;
        font-family: 'Arial';
        font-size: 14pt;
    }
    /* Firefox 19+ */
    .darkBlue::-moz-placeholder {
        color: #183666;
        font-family: 'Arial';
        font-size: 14pt;
    }
    /* IE 10-11 */
    .darkBlue:-ms-input-placeholder {
        color: #183666;
        font-family: 'Arial';
        font-size: 14pt;
    }
    /* Edge */
    .darkBlue:-ms-input-placeholder {
        color: #183666;
        font-family: 'Arial';
        font-size: 14pt;
    }
    /* MODERN BROWSER */
    .darkBlue::-webkit-input-placeholder {
        color: #183666;
        font-family: 'Arial';
        font-size: 14pt;
        font-weight: bold
    }

    /* WebKit, Edge */
    .lightBlue::-webkit-input-placeholder {
        color: #5482ab;
        font-family: 'Arial';
        font-size: 12pt;
    }
    /* Firefox 4-18 */
    .lightBlue:-moz-placeholder {
        color: #5482ab;
        font-family: 'Arial';
        font-size: 12pt;
    }
    /* Firefox 19+ */
    .lightBlue::-moz-placeholder {
        color: #5482ab;
        font-family: 'Arial';
        font-size: 12pt;
    }
    /* IE 10-11 */
    .lightBlue:-ms-input-placeholder {
        color: #5482ab;
        font-family: 'Arial';
        font-size: 12pt;
    }
    /* Edge */
    .lightBlue:-ms-input-placeholder {
        color: #5482ab;
        font-family: 'Arial';
        font-size: 12pt;
    }
    /* MODERN BROWSER */
    .lightBlue::-webkit-input-placeholder {
        color: #5482ab;
        font-family: 'Arial';
        font-size: 12pt;
    }

    .formControl1 {
        padding: 20px;
    }

    .formControl2 {
        padding: 20px;
    }

    .fade {
        opacity: 0;
        -webkit-transition: opacity .3s linear;
        transition: opacity .3s linear
    }

    .modal-content {
        box-shadow: none;
        border: none;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 5px
    }

    .modal-content, .popover {
        -webkit-box-shadow: none
    }

    .modal-header {
        border-bottom: 2px solid #EAEDEF;
        padding: 15px 20px 12px
    }

    .modal-body, .modal-footer {
        padding: 15px 20px
    }

    .modal-footer {
        border-top: 2px solid #EAEDEF
    }

    .modal-message .modal-dialog {
        width: 100%;
        margin: 0
    }

    .modal-message .modal-content {
        -webkit-border-radius: 0;
        -moz-border-radius: 0;
        border-radius: 0
    }

    .modal-message .modal-body, .modal-message .modal-footer, .modal-message .modal-header {
        width: 60%;
        border: none;
        margin: 0 auto
    }

    .modal-backdrop.in {
        opacity: .3;
        filter: alpha(opacity=30)
    }

    .lightBlueSelect {
        color: #5482ab;
    }

    .bootstrap-select > .dropdown-toggle.bs-placeholder {
        color: #5482ab;
        font-family: 'Arial';
        font-size: 12pt;
    }

    textarea {
        width: 100%;
    }

    .modal {
        position: absolute;
        top: 200px;
        right: 250px;
        bottom: 0;
        left: 0;
        z-index: 10040;
        height: 800px;
    }

    table {
        width: 100%;
        margin-bottom: 20px;
        border-collapse: collapse;
    }

    table, th, td {
        border: 1px solid #cdcdcd;
    }

        table th, table td {
            padding: 10px;
            text-align: left;
        }

    input100 {
        width: 100%;
    }
</style>

<div class="form-horizontal">
    <div id="loading">
        <img id="loadingGIF2" src="~/Content/assets/img/ajax-loader.gif" alt="Loading..." />
    </div>
    <div id="top"></div>

    <div class="container " style="height: 200vh">
        <div class="main">
            <div class="row">
                <div class="col-sm-12">
                    <div class="panel panel-primary" style="border-radius: 10px">
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-sm-4">
                                    <input type="text" class="form-control formControl2" id="demandeur" placeholder="Demandeur">
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control formControl2" id="division" placeholder="Division">
                                </div>
                                <div class="col-sm-4">
                                    <input type="text" class="form-control formControl2" id="agent" placeholder="Agent">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <div class="panel panel-primary" style="border-radius: 10px">
                        <div style="margin:15px;">
                            <h6 style="margin-left: 25px; float:left ; color: #5482ab; font-family: 'Arial Bold'; font-size: 18pt;">
                                <b>@Resources.ClientIdentification</b>
                            </h6>
                        </div>
                        <hr width="100%" />
                        <div class="panel-body">
                            <div class="row">
                                <div class="">
                                    <input type="text" class="form-control formControl2" id="clientName" placeholder="Nom">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">

                    <div class="panel panel-primary" style="border-radius: 10px">
                        <div style="margin:15px;">
                            <h6 style="margin-left: 25px; float:left ; color: #5482ab; font-family: 'Arial Bold'; font-size: 18pt;">
                                <b>@Resources.Companies</b>
                            </h6>
                        </div>
                        <hr width="100%" />
                        <div class="panel-body">
                            <div class="row">
                                <div class="">
                                    <input type="text" class="form-control formControl2" id="compagnie" placeholder="Compagnie">
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="panel panel-primary" style="border-radius: 10px">
                        <div style="margin:15px;">
                            <h6 style="margin-left: 25px; float:left ; color: #5482ab; font-family: 'Arial Bold'; font-size: 18pt;">
                                <b>@Resources.Addresses</b>
                            </h6>
                        </div>
                        <hr width="100%" />
                        <div class="panel-body">
                            <div class="" style="color:#5482ab">
                                <div class="row">
                                    <button class="btn btn-info " value="Ajouter" onclick="showNewClientDiv()">Ajouter ou effacer une adresse</button>
                                </div>
                                <br />
                                <div id="newClientDiv" hidden>
                                    <div class="">
                                        <div class="row">
                                            <form>
                                                <div class="form-group">
                                                    <div class="col-sm-6">
                                                        <input id="contact" type="text" class="form-control" placeholder="Contact">
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <input id="adresse" type="text" class="form-control" placeholder="Adresse">
                                                    </div>

                                                </div>

                                                <div class="form-group">
                                                    <div class="col-sm-6">
                                                        <input id="ville" type="text" class="form-control" placeholder="Ville">
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <input id="codePostal" type="text" class="form-control" placeholder="Code postal">
                                                    </div>

                                                </div>
                                                <div class="form-group">
                                                    <div class="col-sm-6">
                                                        <input id="province" type="text" class="form-control" placeholder="Province">
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="row">
                                                            <div class="col-sm-3">
                                                                <select class="form-control" id="country">
                                                                    <option value="" disabled selected>Pays</option>
                                                                    <option value="canada">Canada</option>
                                                                    <option value="eu">États-unis</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-sm-6">
                                                                <input id="telephone" type="tel" class="form-control" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" placeholder="Téléphone">
                                                            </div>
                                                            <div class="col-sm-3">
                                                                <input id="poste" type="tel" class="form-control"  placeholder="Poste">
                                                            </div>

                                                        </div>

                                                    </div>

                                                </div>

                                            </form>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <button class="btn btn-info add-row" value="Ajouter" onclick="">Ajouter</button> @*add-row*@
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="">
                                            <table>
                                                <thead>
                                                    <tr style="color:#5482ab">
                                                        <th>Selectionner</th>
                                                        <th>@Resources.Contact</th>
                                                        <th>@Resources.Adresse</th>
                                                        <th>@Resources.City</th>
                                                        <th>@Resources.postalCode</th>
                                                        <th>@Resources.State</th>
                                                        <th>@Resources.Phone</th>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <button class="btn btn-info submitButton delete-row" type="submit" value="Submit" onclick="submitForm()">Effacer</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">

                    <div class="panel panel-primary" style="border-radius: 10px">
                        <div style="margin:15px;">
                            <h6 style="margin-left: 25px; float:left ; color: #5482ab; font-family: 'Arial Bold'; font-size: 18pt;">
                                <b>@Resources.Comments</b>
                            </h6>
                        </div>
                        <hr width="100%" />
                        <div class="panel-body">
                            <div class="form-group">
                                <textarea class="form-control" rows="5" id="comment" placeholder="Commentaires"></textarea>
                            </div>                        
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div style="text-align:right">
                        <button class="specialB" type="reset" value="Cancel" onclick="cancelForm2()">Retouner a la recherche</button>&nbsp;
                        <button class="specialB" type="submit" value="Submit" onclick="submitForm()">Quitter</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<script>
    $(document).ready(function () {
        //$('#codePostal').mask('00-00-00');
        //$('#telephone').mask('000-000-0000');

        $(".add-row").click(function () {
            var contact = $("#contact").val();
            var adresse = $("#adresse").val();
            var ville = $("#ville").val();
            var codePostal = $("#codePostal").val();
            var province = $("#province").val();
            var telephone = $("#telephone").val();

            //ajout du nouveau client a la bd
            $.ajax({
            url: '@Url.Action("addNewClient", "NewClient")',
                    type: 'GET',
                    dataType: 'html',
                data: {
                     contact  : $("#contact").val(),
                     adresse  :  $("#adresse").val(),
                     ville : $("#ville").val(),
                     codePostal : $("#codePostal").val(),
                     province: $("#province").val(),
                     country: $("#country").val(),
                    telephone: $("#telephone").val(),
                    poste: $("#poste").val()

            },
            success:function(data)
            {
                var markup = "<tr style='color:#5482ab'><td><input type='checkbox' name='record'></td><td>" + contact + "</td><td>" + adresse + "</td><td>" + ville + "</td><td>" + codePostal + "</td><td>" + province + "</td><td>" + telephone + "</td></tr>";
                  $("table tbody").append(markup);

            }
          });
        });

        // Find and remove selected table rows
        $(".delete-row").click(function () {
            $("table tbody").find('input[name="record"]').each(function () {
                if ($(this).is(":checked")) {
                    $(this).parents("tr").remove();
                }
            });
        });
    });
    function showNewClientDiv() {
        $('#newClientDiv').toggle();
    }

</script>

